<h1>3장 HTTP 메시지</h1>

> 메시지 문법과 문법에 따른 동작 원리

HTTP 는 인터넷 배달원, HTTP 메시지는 소포  
HTTP 메시지의 모든 것

- 메시지가 어떻게 흘러가는가
- HTTP 메시지의 세 부분 (시작줄, 헤더, 개체 본문)
- 요청과 응답 메시지의 차이
- 요청 메시지가 지원하는 여러 기능(메서드)
- 응답 메시지가 반환하는 여러 상태 코드
- HTTP 헤더가 하는 일

<h2>contents</h2>

1. 메시지의 흐름
   > 트랜잭션 방향  
   > **인바운드**로 들어와 **아웃바운드**로 나가고, 전체적으로 **다운스트림**으로 흐름

    1. 메시지는 원 서버 방향을 인바운드로 하여 송신된다
       > 서버로 들어오는 요청이 **인바운드**, 서버에서 나가는 응답이 **아웃바운드**

    2. 다운스트림으로 흐르는 메시지
       > 메시지가 흐르는 방향이 **다운스트림**

2. 메시지의 각 부분
   > **시작줄 / 헤더 / 본문** 으로 이루어짐. **문법**도 있음. **확장**도 가능

    1. 메시지의 문법
       > 모든 메시지는 요청 / 응답으로 분류     
       요청은 서버의 동작 요구, 응답은 요구의 결과
       > - 메서드 : 웹서버에 요구하는 동작
       > - 요청 URL, 버전
       > - 상태코드 <sup>세자리</sup>, 사유 구절 <sup>reason-phrase</sup>
       > - 헤더들
       > - 엔터티 본문 <sup>메시지 본문 혹은 본문</sup>

    2. 시작줄
       > 무엇을 해야하는가 (했는가)   
       요청줄 : 버전, 요청 메서드, 요청 URL   
       응답줄 : 버전, 상태코드, 사유 구절

    3. 헤더
       > 메시지의 추가 정보, key-value 목록  
       개행하면 읽기 좋음. **마지막 CRLF 잊지 마라**

    4. 엔터티 본문
       > 실제 전송할 데이터 <sup>화물</sup>

    5. 버전 0.9 메시지
       > 요청줄과 엔터티 본문으로만 구성  
       여전히 쓰는 서버들도 있어서 알고만 있길

3. 메서드
   > 동작을 용도에 맞게 구분

    1. 안전한 메서드 (Safe Method)
       > GET / HEAD, HTTP 결과로 서버에 어떤일도 일어나지 않음

    2. GET
       > 주세요

    3. HEAD
       > GET 에서 헤더만 필요할 때
       ex. 리소스의 타입, 응답 코드 등

    4. PUT
       > 리소스에<sup>file</sup> 쓰기, **로그인 요구**

    5. POST
       > 입력 데이터 전송
       ex. 게시판 글쓰기, 로그인, 파일 업로드 등

    6. TRACE
       > 요청을 그대로 반환, **디버깅** 용도

    7. OPTIONS
       > 서버가 해당 리소스에 대해 지원하는 메서드 목록 반환

    8. DELETE
       > 리소스 삭제

    9. 확장 메서드
       > HTTP/1.1 에 정의되지 않은 메서드들  
       _**엄격하게 보내고 관대하게 받아들여라**_ : 내가 정의한 메서드를 다른 webapp은 모를 거라서

4. 상태코드
   > 메서드의 결과

    1. 100-199 : 정보성 상태 코드
       > **100이 논란이 많음**  
       클라이언트 / 서버 / 프락시를 경우에 따라 잘 분류해서 사용

    2. 200-299 : 성공 상태 코드
       > https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/200

    3. 300-399 : 리다이렉션 상태 코드
       > 다른 대안을 제시, **리다이렉트 URL과 설명을 포함하는 건 좋은 습관**

    4. 400-499 : 클라이언트 에러 상태 코드
       > 클라이언트 잘못  
       클라이언트가 서버가 다룰수 없는 무언가를 보냈을 때

    5. 500-599 : 서버 에러 상태 코드
       > 서버 잘못  
       서버가 요청을 처리할 수 없을 때

5. 헤더
   > 메시지 부가 정보

    1. 일반 헤더
       > 요청 / 응답 모두에 쓰이는 아주 일반적으로 유용한 정보   
       Date, 캐시 등

    2. 요청 헤더
       > 요청 메시지의 부가 정보   
       클라이언트가 기대하는 것, 쿠키 등

    3. 응답 헤더
       > 클라이언트에게 제공하는 응답 메시지의 부가 정보

    4. 엔터티 헤더
       > 엔터티 본문에 대한 정보

6. 추가 정보